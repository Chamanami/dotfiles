"use strict";var xn=Object.create;var xe=Object.defineProperty;var En=Object.getOwnPropertyDescriptor;var kn=Object.getOwnPropertyNames;var bn=Object.getPrototypeOf,Cn=Object.prototype.hasOwnProperty;var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fn=(e,t)=>{for(var r in t)xe(e,r,{get:t[r],enumerable:!0})},wt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of kn(t))!Cn.call(e,i)&&i!==r&&xe(e,i,{get:()=>t[i],enumerable:!(n=En(t,i))||n.enumerable});return e};var J=(e,t,r)=>(r=e!=null?xn(bn(e)):{},wt(t||!e||!e.__esModule?xe(r,"default",{value:e,enumerable:!0}):r,e)),On=e=>wt(xe({},"__esModule",{value:!0}),e);var T=y(Ue=>{"use strict";Ue.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,s)=>i!=null?n(i):r(s)),e.apply(this,t)})},"name",{value:e.name})};Ue.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var St=y((Js,vt)=>{var V=require("constants"),Tn=process.cwd,Ee=null,qn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ee||(Ee=Tn.call(process)),Ee};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Je=process.chdir,process.chdir=function(e){Ee=null,Je.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Je));var Je;vt.exports=Ln;function Ln(e){V.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=m(e.statSync),e.fstatSync=m(e.fstatSync),e.lstatSync=m(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(a,l,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(a,l,f,u){u&&process.nextTick(u)},e.lchownSync=function(){}),qn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(a){function l(f,u,d){var v=Date.now(),w=0;a(f,u,function k(U){if(U&&(U.code==="EACCES"||U.code==="EPERM"||U.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){e.stat(u,function(R,ue){R&&R.code==="ENOENT"?a(f,u,k):d(U)})},w),w<100&&(w+=10);return}d&&d(U)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,a),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(a){function l(f,u,d,v,w,k){var U;if(k&&typeof k=="function"){var R=0;U=function(ue,yt,gt){if(ue&&ue.code==="EAGAIN"&&R<10)return R++,a.call(e,f,u,d,v,w,U);k.apply(this,arguments)}}return a.call(e,f,u,d,v,w,U)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,a),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(a){return function(l,f,u,d,v){for(var w=0;;)try{return a.call(e,l,f,u,d,v)}catch(k){if(k.code==="EAGAIN"&&w<10){w++;continue}throw k}}}(e.readSync);function t(a){a.lchmod=function(l,f,u){a.open(l,V.O_WRONLY|V.O_SYMLINK,f,function(d,v){if(d){u&&u(d);return}a.fchmod(v,f,function(w){a.close(v,function(k){u&&u(w||k)})})})},a.lchmodSync=function(l,f){var u=a.openSync(l,V.O_WRONLY|V.O_SYMLINK,f),d=!0,v;try{v=a.fchmodSync(u,f),d=!1}finally{if(d)try{a.closeSync(u)}catch{}else a.closeSync(u)}return v}}function r(a){V.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(l,f,u,d){a.open(l,V.O_SYMLINK,function(v,w){if(v){d&&d(v);return}a.futimes(w,f,u,function(k){a.close(w,function(U){d&&d(k||U)})})})},a.lutimesSync=function(l,f,u){var d=a.openSync(l,V.O_SYMLINK),v,w=!0;try{v=a.futimesSync(d,f,u),w=!1}finally{if(w)try{a.closeSync(d)}catch{}else a.closeSync(d)}return v}):a.futimes&&(a.lutimes=function(l,f,u,d){d&&process.nextTick(d)},a.lutimesSync=function(){})}function n(a){return a&&function(l,f,u){return a.call(e,l,f,function(d){h(d)&&(d=null),u&&u.apply(this,arguments)})}}function i(a){return a&&function(l,f){try{return a.call(e,l,f)}catch(u){if(!h(u))throw u}}}function s(a){return a&&function(l,f,u,d){return a.call(e,l,f,u,function(v){h(v)&&(v=null),d&&d.apply(this,arguments)})}}function o(a){return a&&function(l,f,u){try{return a.call(e,l,f,u)}catch(d){if(!h(d))throw d}}}function c(a){return a&&function(l,f,u){typeof f=="function"&&(u=f,f=null);function d(v,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),u&&u.apply(this,arguments)}return f?a.call(e,l,f,d):a.call(e,l,d)}}function m(a){return a&&function(l,f){var u=f?a.call(e,l,f):a.call(e,l);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}}function h(a){if(!a||a.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(a.code==="EINVAL"||a.code==="EPERM"))}}});var Et=y((Bs,xt)=>{var Pt=require("stream").Stream;xt.exports=Dn;function Dn(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Pt.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),c=0,m=o.length;c<m;c++){var h=o[c];this[h]=i[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(a,l){if(a){s.emit("error",a),s.readable=!1;return}s.fd=l,s.emit("open",l),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Pt.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,c=s.length;o<c;o++){var m=s[o];this[m]=i[m]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var bt=y((Gs,kt)=>{"use strict";kt.exports=$n;var In=Object.getPrototypeOf||function(e){return e.__proto__};function $n(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:In(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var ie=y((Qs,Qe)=>{var C=require("fs"),An=St(),Nn=Et(),Rn=bt(),ke=require("util"),A,Ce;typeof Symbol=="function"&&typeof Symbol.for=="function"?(A=Symbol.for("graceful-fs.queue"),Ce=Symbol.for("graceful-fs.previous")):(A="___graceful-fs.queue",Ce="___graceful-fs.previous");function jn(){}function Ot(e,t){Object.defineProperty(e,A,{get:function(){return t}})}var te=jn;ke.debuglog?te=ke.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(te=function(){var e=ke.format.apply(ke,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});C[A]||(Ct=global[A]||[],Ot(C,Ct),C.close=function(e){function t(r,n){return e.call(C,r,function(i){i||Ft(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Ce,{value:e}),t}(C.close),C.closeSync=function(e){function t(r){e.apply(C,arguments),Ft()}return Object.defineProperty(t,Ce,{value:e}),t}(C.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){te(C[A]),require("assert").equal(C[A].length,0)}));var Ct;global[A]||Ot(global,C[A]);Qe.exports=Be(Rn(C));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!C.__patched&&(Qe.exports=Be(C),C.__patched=!0);function Be(e){An(e),e.gracefulify=Be,e.createReadStream=yt,e.createWriteStream=gt;var t=e.readFile;e.readFile=r;function r(p,S,g){return typeof S=="function"&&(g=S,S=null),D(p,S,g);function D(I,O,b,F){return t(I,O,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?ne([D,[I,O,b],P,F||Date.now(),Date.now()]):typeof b=="function"&&b.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(p,S,g,D){return typeof g=="function"&&(D=g,g=null),I(p,S,g,D);function I(O,b,F,P,$){return n(O,b,F,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?ne([I,[O,b,F,P],E,$||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=o);function o(p,S,g,D){return typeof g=="function"&&(D=g,g=null),I(p,S,g,D);function I(O,b,F,P,$){return s(O,b,F,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?ne([I,[O,b,F,P],E,$||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=m);function m(p,S,g,D){return typeof g=="function"&&(D=g,g=0),I(p,S,g,D);function I(O,b,F,P,$){return c(O,b,F,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?ne([I,[O,b,F,P],E,$||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var h=e.readdir;e.readdir=l;var a=/^v[0-5]\./;function l(p,S,g){typeof S=="function"&&(g=S,S=null);var D=a.test(process.version)?function(b,F,P,$){return h(b,I(b,F,P,$))}:function(b,F,P,$){return h(b,F,I(b,F,P,$))};return D(p,S,g);function I(O,b,F,P){return function($,E){$&&($.code==="EMFILE"||$.code==="ENFILE")?ne([D,[O,b,F],$,P||Date.now(),Date.now()]):(E&&E.sort&&E.sort(),typeof F=="function"&&F.call(this,$,E))}}}if(process.version.substr(0,4)==="v0.8"){var f=Nn(e);k=f.ReadStream,R=f.WriteStream}var u=e.ReadStream;u&&(k.prototype=Object.create(u.prototype),k.prototype.open=U);var d=e.WriteStream;d&&(R.prototype=Object.create(d.prototype),R.prototype.open=ue),Object.defineProperty(e,"ReadStream",{get:function(){return k},set:function(p){k=p},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return R},set:function(p){R=p},enumerable:!0,configurable:!0});var v=k;Object.defineProperty(e,"FileReadStream",{get:function(){return v},set:function(p){v=p},enumerable:!0,configurable:!0});var w=R;Object.defineProperty(e,"FileWriteStream",{get:function(){return w},set:function(p){w=p},enumerable:!0,configurable:!0});function k(p,S){return this instanceof k?(u.apply(this,arguments),this):k.apply(Object.create(k.prototype),arguments)}function U(){var p=this;Me(p.path,p.flags,p.mode,function(S,g){S?(p.autoClose&&p.destroy(),p.emit("error",S)):(p.fd=g,p.emit("open",g),p.read())})}function R(p,S){return this instanceof R?(d.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function ue(){var p=this;Me(p.path,p.flags,p.mode,function(S,g){S?(p.destroy(),p.emit("error",S)):(p.fd=g,p.emit("open",g))})}function yt(p,S){return new e.ReadStream(p,S)}function gt(p,S){return new e.WriteStream(p,S)}var Pn=e.open;e.open=Me;function Me(p,S,g,D){return typeof g=="function"&&(D=g,g=null),I(p,S,g,D);function I(O,b,F,P,$){return Pn(O,b,F,function(E,_s){E&&(E.code==="EMFILE"||E.code==="ENFILE")?ne([I,[O,b,F,P],E,$||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}return e}function ne(e){te("ENQUEUE",e[0].name,e[1]),C[A].push(e),Ge()}var be;function Ft(){for(var e=Date.now(),t=0;t<C[A].length;++t)C[A][t].length>2&&(C[A][t][3]=e,C[A][t][4]=e);Ge()}function Ge(){if(clearTimeout(be),be=void 0,C[A].length!==0){var e=C[A].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)te("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){te("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var c=Date.now()-s,m=Math.max(s-i,1),h=Math.min(m*1.2,100);c>=h?(te("RETRY",t.name,r),t.apply(null,r.concat([i]))):C[A].push(e)}be===void 0&&(be=setTimeout(Ge,0))}}});var W=y(K=>{"use strict";var Tt=T().fromCallback,j=ie(),Wn=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof j[e]=="function");Object.assign(K,j);Wn.forEach(e=>{K[e]=Tt(j[e])});K.exists=function(e,t){return typeof t=="function"?j.exists(e,t):new Promise(r=>j.exists(e,r))};K.read=function(e,t,r,n,i,s){return typeof s=="function"?j.read(e,t,r,n,i,s):new Promise((o,c)=>{j.read(e,t,r,n,i,(m,h,a)=>{if(m)return c(m);o({bytesRead:h,buffer:a})})})};K.write=function(e,t,...r){return typeof r[r.length-1]=="function"?j.write(e,t,...r):new Promise((n,i)=>{j.write(e,t,...r,(s,o,c)=>{if(s)return i(s);n({bytesWritten:o,buffer:c})})})};K.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?j.readv(e,t,...r):new Promise((n,i)=>{j.readv(e,t,...r,(s,o,c)=>{if(s)return i(s);n({bytesRead:o,buffers:c})})})};K.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?j.writev(e,t,...r):new Promise((n,i)=>{j.writev(e,t,...r,(s,o,c)=>{if(s)return i(s);n({bytesWritten:o,buffers:c})})})};typeof j.realpath.native=="function"?K.realpath.native=Tt(j.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Lt=y((Ks,qt)=>{"use strict";var _n=require("path");qt.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(_n.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var At=y((zs,Ye)=>{"use strict";var Dt=W(),{checkPath:It}=Lt(),$t=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Ye.exports.makeDir=async(e,t)=>(It(e),Dt.mkdir(e,{mode:$t(t),recursive:!0}));Ye.exports.makeDirSync=(e,t)=>(It(e),Dt.mkdirSync(e,{mode:$t(t),recursive:!0}))});var B=y((Vs,Nt)=>{"use strict";var Mn=T().fromPromise,{makeDir:Un,makeDirSync:Ke}=At(),ze=Mn(Un);Nt.exports={mkdirs:ze,mkdirsSync:Ke,mkdirp:ze,mkdirpSync:Ke,ensureDir:ze,ensureDirSync:Ke}});var H=y((Hs,jt)=>{"use strict";var Jn=T().fromPromise,Rt=W();function Bn(e){return Rt.access(e).then(()=>!0).catch(()=>!1)}jt.exports={pathExists:Jn(Bn),pathExistsSync:Rt.existsSync}});var Ve=y((Xs,Wt)=>{"use strict";var se=W(),Gn=T().fromPromise;async function Qn(e,t,r){let n=await se.open(e,"r+"),i=null;try{await se.futimes(n,t,r)}finally{try{await se.close(n)}catch(s){i=s}}if(i)throw i}function Yn(e,t,r){let n=se.openSync(e,"r+");return se.futimesSync(n,t,r),se.closeSync(n)}Wt.exports={utimesMillis:Gn(Qn),utimesMillisSync:Yn}});var re=y((Zs,Jt)=>{"use strict";var oe=W(),q=require("path"),_t=T().fromPromise;function Kn(e,t,r){let n=r.dereference?i=>oe.stat(i,{bigint:!0}):i=>oe.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}function zn(e,t,r){let n,i=r.dereference?o=>oe.statSync(o,{bigint:!0}):o=>oe.lstatSync(o,{bigint:!0}),s=i(e);try{n=i(t)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:n}}async function Vn(e,t,r,n){let{srcStat:i,destStat:s}=await Kn(e,t,n);if(s){if(le(i,s)){let o=q.basename(e),c=q.basename(t);if(r==="move"&&o!==c&&o.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&He(e,t))throw new Error(Fe(e,t,r));return{srcStat:i,destStat:s}}function Hn(e,t,r,n){let{srcStat:i,destStat:s}=zn(e,t,n);if(s){if(le(i,s)){let o=q.basename(e),c=q.basename(t);if(r==="move"&&o!==c&&o.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&He(e,t))throw new Error(Fe(e,t,r));return{srcStat:i,destStat:s}}async function Mt(e,t,r,n){let i=q.resolve(q.dirname(e)),s=q.resolve(q.dirname(r));if(s===i||s===q.parse(s).root)return;let o;try{o=await oe.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(le(t,o))throw new Error(Fe(e,r,n));return Mt(e,t,s,n)}function Ut(e,t,r,n){let i=q.resolve(q.dirname(e)),s=q.resolve(q.dirname(r));if(s===i||s===q.parse(s).root)return;let o;try{o=oe.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(le(t,o))throw new Error(Fe(e,r,n));return Ut(e,t,s,n)}function le(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function He(e,t){let r=q.resolve(e).split(q.sep).filter(i=>i),n=q.resolve(t).split(q.sep).filter(i=>i);return r.every((i,s)=>n[s]===i)}function Fe(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Jt.exports={checkPaths:_t(Vn),checkPathsSync:Hn,checkParentPaths:_t(Mt),checkParentPathsSync:Ut,isSrcSubdir:He,areIdentical:le}});var Kt=y((eo,Yt)=>{"use strict";var N=W(),fe=require("path"),{mkdirs:Xn}=B(),{pathExists:Zn}=H(),{utimesMillis:ei}=Ve(),me=re();async function ti(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await me.checkPaths(e,t,"copy",r);if(await me.checkParentPaths(e,n,t,"copy"),!await Gt(e,t,r))return;let o=fe.dirname(t);await Zn(o)||await Xn(o),await Qt(i,e,t,r)}async function Gt(e,t,r){return r.filter?r.filter(e,t):!0}async function Qt(e,t,r,n){let s=await(n.dereference?N.stat:N.lstat)(t);if(s.isDirectory())return si(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return ri(s,e,t,r,n);if(s.isSymbolicLink())return oi(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function ri(e,t,r,n,i){if(!t)return Bt(e,r,n,i);if(i.overwrite)return await N.unlink(n),Bt(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function Bt(e,t,r,n){if(await N.copyFile(t,r),n.preserveTimestamps){ni(e.mode)&&await ii(r,e.mode);let i=await N.stat(t);await ei(r,i.atime,i.mtime)}return N.chmod(r,e.mode)}function ni(e){return(e&128)===0}function ii(e,t){return N.chmod(e,t|128)}async function si(e,t,r,n,i){t||await N.mkdir(n);let s=await N.readdir(r);await Promise.all(s.map(async o=>{let c=fe.join(r,o),m=fe.join(n,o);if(!await Gt(c,m,i))return;let{destStat:a}=await me.checkPaths(c,m,"copy",i);return Qt(a,c,m,i)})),t||await N.chmod(n,e.mode)}async function oi(e,t,r,n){let i=await N.readlink(t);if(n.dereference&&(i=fe.resolve(process.cwd(),i)),!e)return N.symlink(i,r);let s=null;try{s=await N.readlink(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return N.symlink(i,r);throw o}if(n.dereference&&(s=fe.resolve(process.cwd(),s)),me.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(me.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await N.unlink(r),N.symlink(i,r)}Yt.exports=ti});var Zt=y((to,Xt)=>{"use strict";var _=ie(),de=require("path"),ci=B().mkdirsSync,ai=Ve().utimesMillisSync,pe=re();function ui(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=pe.checkPathsSync(e,t,"copy",r);if(pe.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let s=de.dirname(t);return _.existsSync(s)||ci(s),zt(i,e,t,r)}function zt(e,t,r,n){let s=(n.dereference?_.statSync:_.lstatSync)(t);if(s.isDirectory())return yi(s,e,t,r,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return li(s,e,t,r,n);if(s.isSymbolicLink())return vi(e,t,r,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${t}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function li(e,t,r,n,i){return t?fi(e,r,n,i):Vt(e,r,n,i)}function fi(e,t,r,n){if(n.overwrite)return _.unlinkSync(r),Vt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Vt(e,t,r,n){return _.copyFileSync(t,r),n.preserveTimestamps&&mi(e.mode,t,r),Xe(r,e.mode)}function mi(e,t,r){return di(e)&&pi(r,e),hi(t,r)}function di(e){return(e&128)===0}function pi(e,t){return Xe(e,t|128)}function Xe(e,t){return _.chmodSync(e,t)}function hi(e,t){let r=_.statSync(e);return ai(t,r.atime,r.mtime)}function yi(e,t,r,n,i){return t?Ht(r,n,i):gi(e.mode,r,n,i)}function gi(e,t,r,n){return _.mkdirSync(r),Ht(t,r,n),Xe(r,e)}function Ht(e,t,r){_.readdirSync(e).forEach(n=>wi(n,e,t,r))}function wi(e,t,r,n){let i=de.join(t,e),s=de.join(r,e);if(n.filter&&!n.filter(i,s))return;let{destStat:o}=pe.checkPathsSync(i,s,"copy",n);return zt(o,i,s,n)}function vi(e,t,r,n){let i=_.readlinkSync(t);if(n.dereference&&(i=de.resolve(process.cwd(),i)),e){let s;try{s=_.readlinkSync(r)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return _.symlinkSync(i,r);throw o}if(n.dereference&&(s=de.resolve(process.cwd(),s)),pe.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(pe.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return Si(i,r)}else return _.symlinkSync(i,r)}function Si(e,t){return _.unlinkSync(t),_.symlinkSync(e,t)}Xt.exports=ui});var Oe=y((ro,er)=>{"use strict";var Pi=T().fromPromise;er.exports={copy:Pi(Kt()),copySync:Zt()}});var he=y((no,rr)=>{"use strict";var tr=ie(),xi=T().fromCallback;function Ei(e,t){tr.rm(e,{recursive:!0,force:!0},t)}function ki(e){tr.rmSync(e,{recursive:!0,force:!0})}rr.exports={remove:xi(Ei),removeSync:ki}});var lr=y((io,ur)=>{"use strict";var bi=T().fromPromise,sr=W(),or=require("path"),cr=B(),ar=he(),nr=bi(async function(t){let r;try{r=await sr.readdir(t)}catch{return cr.mkdirs(t)}return Promise.all(r.map(n=>ar.remove(or.join(t,n))))});function ir(e){let t;try{t=sr.readdirSync(e)}catch{return cr.mkdirsSync(e)}t.forEach(r=>{r=or.join(e,r),ar.removeSync(r)})}ur.exports={emptyDirSync:ir,emptydirSync:ir,emptyDir:nr,emptydir:nr}});var pr=y((so,dr)=>{"use strict";var Ci=T().fromPromise,fr=require("path"),z=W(),mr=B();async function Fi(e){let t;try{t=await z.stat(e)}catch{}if(t&&t.isFile())return;let r=fr.dirname(e),n=null;try{n=await z.stat(r)}catch(i){if(i.code==="ENOENT"){await mr.mkdirs(r),await z.writeFile(e,"");return}else throw i}n.isDirectory()?await z.writeFile(e,""):await z.readdir(r)}function Oi(e){let t;try{t=z.statSync(e)}catch{}if(t&&t.isFile())return;let r=fr.dirname(e);try{z.statSync(r).isDirectory()||z.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")mr.mkdirsSync(r);else throw n}z.writeFileSync(e,"")}dr.exports={createFile:Ci(Fi),createFileSync:Oi}});var vr=y((oo,wr)=>{"use strict";var Ti=T().fromPromise,hr=require("path"),X=W(),yr=B(),{pathExists:qi}=H(),{areIdentical:gr}=re();async function Li(e,t){let r;try{r=await X.lstat(t)}catch{}let n;try{n=await X.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(r&&gr(n,r))return;let i=hr.dirname(t);await qi(i)||await yr.mkdirs(i),await X.link(e,t)}function Di(e,t){let r;try{r=X.lstatSync(t)}catch{}try{let s=X.lstatSync(e);if(r&&gr(s,r))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=hr.dirname(t);return X.existsSync(n)||yr.mkdirsSync(n),X.linkSync(e,t)}wr.exports={createLink:Ti(Li),createLinkSync:Di}});var Pr=y((co,Sr)=>{"use strict";var Z=require("path"),ye=W(),{pathExists:Ii}=H(),$i=T().fromPromise;async function Ai(e,t){if(Z.isAbsolute(e)){try{await ye.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:e}}let r=Z.dirname(t),n=Z.join(r,e);if(await Ii(n))return{toCwd:n,toDst:e};try{await ye.lstat(e)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:e,toDst:Z.relative(r,e)}}function Ni(e,t){if(Z.isAbsolute(e)){if(!ye.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=Z.dirname(t),n=Z.join(r,e);if(ye.existsSync(n))return{toCwd:n,toDst:e};if(!ye.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Z.relative(r,e)}}Sr.exports={symlinkPaths:$i(Ai),symlinkPathsSync:Ni}});var kr=y((ao,Er)=>{"use strict";var xr=W(),Ri=T().fromPromise;async function ji(e,t){if(t)return t;let r;try{r=await xr.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function Wi(e,t){if(t)return t;let r;try{r=xr.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Er.exports={symlinkType:Ri(ji),symlinkTypeSync:Wi}});var Or=y((uo,Fr)=>{"use strict";var _i=T().fromPromise,br=require("path"),G=W(),{mkdirs:Mi,mkdirsSync:Ui}=B(),{symlinkPaths:Ji,symlinkPathsSync:Bi}=Pr(),{symlinkType:Gi,symlinkTypeSync:Qi}=kr(),{pathExists:Yi}=H(),{areIdentical:Cr}=re();async function Ki(e,t,r){let n;try{n=await G.lstat(t)}catch{}if(n&&n.isSymbolicLink()){let[c,m]=await Promise.all([G.stat(e),G.stat(t)]);if(Cr(c,m))return}let i=await Ji(e,t);e=i.toDst;let s=await Gi(i.toCwd,r),o=br.dirname(t);return await Yi(o)||await Mi(o),G.symlink(e,t,s)}function zi(e,t,r){let n;try{n=G.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let c=G.statSync(e),m=G.statSync(t);if(Cr(c,m))return}let i=Bi(e,t);e=i.toDst,r=Qi(i.toCwd,r);let s=br.dirname(t);return G.existsSync(s)||Ui(s),G.symlinkSync(e,t,r)}Fr.exports={createSymlink:_i(Ki),createSymlinkSync:zi}});var Nr=y((lo,Ar)=>{"use strict";var{createFile:Tr,createFileSync:qr}=pr(),{createLink:Lr,createLinkSync:Dr}=vr(),{createSymlink:Ir,createSymlinkSync:$r}=Or();Ar.exports={createFile:Tr,createFileSync:qr,ensureFile:Tr,ensureFileSync:qr,createLink:Lr,createLinkSync:Dr,ensureLink:Lr,ensureLinkSync:Dr,createSymlink:Ir,createSymlinkSync:$r,ensureSymlink:Ir,ensureSymlinkSync:$r}});var Te=y((fo,Rr)=>{function Vi(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let s=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+s}function Hi(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}Rr.exports={stringify:Vi,stripBom:Hi}});var Mr=y((mo,_r)=>{var ce;try{ce=ie()}catch{ce=require("fs")}var qe=T(),{stringify:jr,stripBom:Wr}=Te();async function Xi(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ce,n="throws"in t?t.throws:!0,i=await qe.fromCallback(r.readFile)(e,t);i=Wr(i);let s;try{s=JSON.parse(i,t?t.reviver:null)}catch(o){if(n)throw o.message=`${e}: ${o.message}`,o;return null}return s}var Zi=qe.fromPromise(Xi);function es(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ce,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Wr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function ts(e,t,r={}){let n=r.fs||ce,i=jr(t,r);await qe.fromCallback(n.writeFile)(e,i,r)}var rs=qe.fromPromise(ts);function ns(e,t,r={}){let n=r.fs||ce,i=jr(t,r);return n.writeFileSync(e,i,r)}var is={readFile:Zi,readFileSync:es,writeFile:rs,writeFileSync:ns};_r.exports=is});var Jr=y((po,Ur)=>{"use strict";var Le=Mr();Ur.exports={readJson:Le.readFile,readJsonSync:Le.readFileSync,writeJson:Le.writeFile,writeJsonSync:Le.writeFileSync}});var De=y((ho,Qr)=>{"use strict";var ss=T().fromPromise,Ze=W(),Br=require("path"),Gr=B(),os=H().pathExists;async function cs(e,t,r="utf-8"){let n=Br.dirname(e);return await os(n)||await Gr.mkdirs(n),Ze.writeFile(e,t,r)}function as(e,...t){let r=Br.dirname(e);Ze.existsSync(r)||Gr.mkdirsSync(r),Ze.writeFileSync(e,...t)}Qr.exports={outputFile:ss(cs),outputFileSync:as}});var Kr=y((yo,Yr)=>{"use strict";var{stringify:us}=Te(),{outputFile:ls}=De();async function fs(e,t,r={}){let n=us(t,r);await ls(e,n,r)}Yr.exports=fs});var Vr=y((go,zr)=>{"use strict";var{stringify:ms}=Te(),{outputFileSync:ds}=De();function ps(e,t,r){let n=ms(t,r);ds(e,n,r)}zr.exports=ps});var Xr=y((wo,Hr)=>{"use strict";var hs=T().fromPromise,M=Jr();M.outputJson=hs(Kr());M.outputJsonSync=Vr();M.outputJSON=M.outputJson;M.outputJSONSync=M.outputJsonSync;M.writeJSON=M.writeJson;M.writeJSONSync=M.writeJsonSync;M.readJSON=M.readJson;M.readJSONSync=M.readJsonSync;Hr.exports=M});var nn=y((vo,rn)=>{"use strict";var ys=W(),Zr=require("path"),{copy:gs}=Oe(),{remove:tn}=he(),{mkdirp:ws}=B(),{pathExists:vs}=H(),en=re();async function Ss(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await en.checkPaths(e,t,"move",r);await en.checkParentPaths(e,i,t,"move");let o=Zr.dirname(t);return Zr.parse(o).root!==o&&await ws(o),Ps(e,t,n,s)}async function Ps(e,t,r,n){if(!n){if(r)await tn(t);else if(await vs(t))throw new Error("dest already exists.")}try{await ys.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await xs(e,t,r)}}async function xs(e,t,r){return await gs(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),tn(e)}rn.exports=Ss});var un=y((So,an)=>{"use strict";var on=ie(),tt=require("path"),Es=Oe().copySync,cn=he().removeSync,ks=B().mkdirpSync,sn=re();function bs(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:s=!1}=sn.checkPathsSync(e,t,"move",r);return sn.checkParentPathsSync(e,i,t,"move"),Cs(t)||ks(tt.dirname(t)),Fs(e,t,n,s)}function Cs(e){let t=tt.dirname(e);return tt.parse(t).root===t}function Fs(e,t,r,n){if(n)return et(e,t,r);if(r)return cn(t),et(e,t,r);if(on.existsSync(t))throw new Error("dest already exists.");return et(e,t,r)}function et(e,t,r){try{on.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Os(e,t,r)}}function Os(e,t,r){return Es(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),cn(e)}an.exports=bs});var fn=y((Po,ln)=>{"use strict";var Ts=T().fromPromise;ln.exports={move:Ts(nn()),moveSync:un()}});var dn=y((xo,mn)=>{"use strict";mn.exports={...W(),...Oe(),...lr(),...Nr(),...Xr(),...B(),...fn(),...De(),...H(),...he()}});var Ws={};Fn(Ws,{activate:()=>Rs,deactivate:()=>js});module.exports=On(Ws);var ht=J(require("vscode"));var nt=J(require("path")),we=J(require("vscode"));var ge=J(dn()),Ie=require("path"),rt=require("vscode"),$e=class{bundle=this.resolveLanguagePack();options;localize(t,...r){let n=this.bundle[t]||t;return this.format(n,r)}init(){try{this.options={...this.options,...JSON.parse(process.env.VSCODE_NLS_CONFIG||"{}")}}catch(t){throw t}}format(t,r=[]){return r.length?t.replace(/\{(\d+)\}/g,(n,i)=>r[i[0]]||n):t}resolveLanguagePack(){this.init();let t="package.nls{0}.json",r=t.replace("{0}","");var n=rt.extensions?.getExtension("KylinIdeTeam.cppdebug")?.extensionPath;n===void 0&&(n=rt.extensions.getExtension.name);let i=this.recurseCandidates(n,t,this.options.locale),s=(0,Ie.resolve)(n,i);try{let o=JSON.parse(i!==r?(0,ge.readFileSync)((0,Ie.resolve)(n,r),"utf-8"):"{}"),c=JSON.parse((0,ge.readFileSync)(s,"utf-8"));return{...o,...c}}catch(o){throw o}}recurseCandidates(t,r,n){let i=r.replace("{0}",`.${n}`),s=(0,Ie.resolve)(t,i);return(0,ge.existsSync)(s)?i:n.split("-")[0]!==n?this.recurseCandidates(t,r,n.split("-")[0]):r.replace("{0}","")}},x=$e.prototype.localize.bind(new $e);var it=class{constructor(t){this.context=t}get iconPath(){let t=nt.join(this.context.extensionPath,"images","Refresh_inverse.svg"),r=nt.join(this.context.extensionPath,"images","Refresh.svg");return{dark:we.Uri.file(t),light:we.Uri.file(r)}}get tooltip(){return x("refresh.process.list.tooltip","Refresh process list")}};async function pn(e,t){let r=await e();return new Promise((n,i)=>{let s=we.window.createQuickPick();s.title=x("attach.to.process","Attach to process"),s.canSelectMany=!1,s.matchOnDescription=!0,s.matchOnDetail=!0,s.placeholder=x("select.process.attach","Select the process to attach to"),s.buttons=[new it(t)],s.items=r;let o=[];s.onDidTriggerButton(async()=>{s.items=await e()},void 0,o),s.onDidAccept(()=>{s.selectedItems.length!==1&&i(new Error(x("process.not.selected","Process not selected.")));let c=s.selectedItems[0].id;o.forEach(m=>m.dispose()),s.dispose(),n(c)},void 0,o),s.onDidHide(()=>{o.forEach(c=>c.dispose()),s.dispose(),i(new Error(x("process.not.selected","Process not selected.")))},void 0,o),s.show()})}var vn=J(require("child_process")),ee=J(require("os"));var ve=J(require("child_process")),L=J(require("fs")),hn=J(require("os")),Q=J(require("path")),st=J(require("vscode"));var Ae=class{[Symbol.toStringTag]="Promise";promise;then(t,r){return this.promise.then(t,r)}catch(t){return this.promise.catch(t)}finally(t){return this.promise.finally(t)}resolve=t=>{};reject=t=>{};state="pending";get isPending(){return this.state==="pending"}get isCompleted(){return this.state!=="pending"}get isResolved(){return this.state==="resolved"}get isRejected(){return this.state==="rejected"}constructor(){this.promise=new Promise((t,r)=>{this.resolve=n=>{if(global.DEVMODE&&this.state!=="pending")throw new Error(`Can't resolve; Promise has already been resolved as ${this.state}`);this.state="resolved",t(n)},this.reject=n=>{if(global.DEVMODE&&this.state!=="pending")throw new Error(`Can't reject; Promise has already been resolved as ${this.state}`);this.state="rejected",r(n)}})}};var ot=(r=>(r[r.ia32=0]="ia32",r[r.x64=1]="x64",r))(ot||{}),qs=process.platform==="win32",Se=class e{static checkAndReplaceWSLPipeProgram(t,r){let n,i=process.env.WINDIR?process.env.WINDIR.toLowerCase():void 0,s=process.env.WINDIR?process.env.WINDIR.replace(/\\/g,"/").toLowerCase():void 0;if(i&&s&&(t.indexOf(i)===0||t.indexOf(s)===0||t.indexOf("${env:windir}")===0)){if(r===1){let c=e.checkForFolderInPath(t,"sysnative");c&&(n=t.replace(`${c}sysnative${c}`,`${c}system32${c}`))}else if(r===0){let c=e.checkForFolderInPath(t,"system32");c&&(n=t.replace(`${c}system32${c}`,`${c}sysnative${c}`))}}return n}static checkForFolderInPath(t,r){return t.indexOf(`/${r}/`)>=0?"/":t.indexOf(`\\${r}\\`)>=0?"\\":""}};async function Ls(e){let t;try{t=await L.promises.stat(e)}catch{return}return t}async function Ne(e){let t=await Ls(e);return!!t&&t.isFile()}function yn(e,t,r){return new Promise((n,i)=>{ve.exec(e,{cwd:t,maxBuffer:500*1024},(s,o,c)=>{if(r){let m="",h=!1;o&&o.length>0&&(m+=o),c&&c.length>0&&(m+=c,h=!0),s&&(m+=s.message,h=!0),h&&(r.append(m),r.show())}if(s){i(s);return}if(c&&c.length>0){i(new Error(c));return}n(o)})})}async function ct(e,t=[],r,n,i){if(n===void 0||!n){let c=st.workspace.getConfiguration("C_Cpp",null)}let s=await Ds(e,t,r,n,i),o=s.exitCode;if(s.exitCode)return{succeeded:!1,exitCode:o,outputError:s.stderr,output:s.stderr||s.stdout||x("process.exited","Process exited with code {0}",`${o}`)};{let c;return s.stdout.length?c=s.stdout:c=x("process.succeeded","Process executed successfully."),{succeeded:!0,exitCode:o,outputError:s.stderr,output:c}}}async function Ds(e,t,r,n,i){let s=new Ae,o=st.workspace.getConfiguration("C_Cpp",null),c=0,m;await $s(e)?m=ve.spawn(`.${qs?"\\":"/"}${Q.basename(e)}`,t,{shell:!0,cwd:Q.dirname(e)}):m=ve.spawn(e,t,{shell:!0});let h=i?.onCancellationRequested(()=>{m.kill()}),a=()=>{m.removeAllListeners(),h&&h.dispose()},l="",f="";return m.stdout&&m.stdout.on("data",u=>{let d=u.toString();if(c>0,l+=d,r){let v=As(r);l.search(v)&&s.resolve({stdout:l.trim(),stderr:f.trim()})}}),m.stderr&&m.stderr.on("data",u=>f+=u.toString()),m.on("close",(u,d)=>{a(),s.resolve({exitCode:u||d||void 0,stdout:l.trim(),stderr:f.trim()})}),m.on("error",u=>{a(),s.reject(u)}),s}function Is(e,t=L.constants.F_OK){return e?new Promise(r=>L.access(e,t,n=>r(!n))):Promise.resolve(!1)}function $s(e){return Is(e,L.constants.X_OK)}function As(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function gn(){let e=(process.env.PATH||"").replace(/"+/g,"").split(";").filter(n=>n),t=(process.env.PATHEXT||"").split(";"),r=["pwsh","powershell"];for(let n of r){let i=e.reduce((s,o)=>[...s,...t.map(c=>Q.join(o,n+c))],[]);for(let s of i)try{if(L.statSync(s).isFile())return n}catch{return}}}function wn(e){let t=hn.homedir(),r=Q.join(t,".visualizers");L.existsSync(r)||L.mkdirSync(r,{recursive:!0});let n=Q.join(e.extensionPath,"visualizers"),i=L.readdirSync(n);for(let s of i)if(s.endsWith(".natvis"))try{L.copyFileSync(Q.join(n,s),Q.join(r,s))}catch(o){console.error(`Failed to copy file ${s}:`,o)}}var ae=class{constructor(t,r,n){this.name=t;this.pid=r;this.commandLine=n}toAttachItem(){return{label:this.name,description:this.pid,detail:this.commandLine,id:this.pid}}},Re=class{static Get(){if(ee.platform()==="win32"){let t=gn();return t?new ft(t):new ut}else return new at}},Pe=class{async getAttachItems(t){let r=await this.getInternalProcessEntries(t);return r.sort((i,s)=>{if(i.name===void 0)return s.name===void 0?0:1;if(s.name===void 0)return-1;let o=i.name.toLowerCase(),c=s.name.toLowerCase();return o===c?0:o<c?-1:1}),r.map(i=>i.toAttachItem())}},at=class extends Pe{async getInternalProcessEntries(t){let r="";switch(ee.platform()){case"darwin":r=Y.psDarwinCommand;break;case"linux":r=Y.psLinuxCommand;break;default:throw new Error(x("os.not.supported",'Operating system "{0}" not supported.',ee.platform()))}let n=await dt(r,t);return Y.ParseProcessFromPs(n)}},Y=class e{static get secondColumnCharacters(){return 50}static get commColumnTitle(){return Array(e.secondColumnCharacters).join("a")}static get psLinuxCommand(){return`ps axww -o pid=,comm=${e.commColumnTitle},args=`}static get psDarwinCommand(){return`ps axww -o pid=,comm=${e.commColumnTitle},args= -c`}static get psToyboxCommand(){return`ps -A -o pid=,comm=${e.commColumnTitle},args=`}static ParseProcessFromPs(t){let r=t.split(ee.EOL);return e.ParseProcessFromPsArray(r)}static ParseProcessFromPsArray(t){let r=[];for(let n=1;n<t.length;n++){let i=t[n];if(!i)continue;let s=e.parseLineFromPs(i);s&&r.push(s)}return r}static parseLineFromPs(t){let n=new RegExp(`^\\s*([0-9]+)\\s+(.{${e.secondColumnCharacters-1}})\\s+(.*)$`).exec(t);if(n&&n.length===4){let i=n[1].trim(),s=n[2].trim(),o=n[3].trim();return new ae(s,i,o)}}};function dt(e,t){return new Promise((r,n)=>{let i=vn.spawn(e,{shell:!0}),s="",o="";if(i){let c,h=setTimeout(()=>{i.removeAllListeners(),c&&c.dispose();try{i.kill()}catch{}n(new Error(x("timeout.processList.spawn",'"{0}" timed out after {1} seconds.',e,"30")))},3e4);c=t?.onCancellationRequested(()=>{clearTimeout(h),i.removeAllListeners();try{i.kill()}catch{}n(new Error(x("cancel.processList.spawn",'"{0}" canceled.',e)))});let a=()=>{clearTimeout(h),i.removeAllListeners(),c&&c.dispose()};i.stdout&&i.stdout.on("data",l=>{s+=l.toString()}),i.stderr&&i.stderr.on("data",l=>{o+=l.toString()}),i.on("close",l=>{if(a(),l!==0){let f=x("error.processList.spawn",'"{0}" exited with code: "{1}".',e,`${l}`);o&&o.length>0&&(f+=ee.EOL,f+=o),n(new Error(f));return}if(o&&o.length>0&&!(o.indexOf("screen size is bogus")>=0)){n(new Error(o));return}r(s)}),i.on("error",l=>{a(),n(l)})}else n(new Error(x("failed.processList.spawn",'Failed to spawn "{0}".',e)))})}var ut=class extends Pe{async getInternalProcessEntries(t){let n=await dt("wmic process get Name,ProcessId,CommandLine /FORMAT:list",t);return lt.ParseProcessFromWmic(n)}},lt=class e{static get wmicNameTitle(){return"Name"}static get wmicCommandLineTitle(){return"CommandLine"}static get wmicPidTitle(){return"ProcessId"}static ParseProcessFromWmic(t){let r=t.split(ee.EOL),n=new ae("current process",void 0,void 0),i=[];for(let s=0;s<r.length;s++){let o=r[s];o&&(e.parseLineFromWmic(o,n),o.lastIndexOf(e.wmicPidTitle,0)===0&&(i.push(n),n=new ae("current process",void 0,void 0)))}return i}static parseLineFromWmic(t,r){if(t.indexOf("=")>=0){let i=t.slice(0,t.indexOf("=")).trim(),s=t.slice(t.indexOf("=")+1).trim();if(i===e.wmicNameTitle)r.name=s;else if(i===e.wmicPidTitle)r.pid=s;else if(i===e.wmicCommandLineTitle){let o="\\??\\";s.lastIndexOf(o,0)===0&&(s=s.slice(o.length)),r.commandLine=s}}}},ft=class extends Pe{constructor(r){super();this.pwsh=r}async getInternalProcessEntries(r){let n=`${this.pwsh} -NoProfile -Command`,s=await dt(`${n} "Get-CimInstance Win32_Process | Select-Object Name,ProcessId,CommandLine | ConvertTo-JSON -Compress"`,r);return mt.ParseProcessFromCim(s)}},mt=class{static get extendedLengthPathPrefix(){return"\\\\?\\"}static get ntObjectManagerPathPrefix(){return"\\??\\"}static ParseProcessFromCim(t){return JSON.parse(t).map(n=>{let i=n.CommandLine||void 0;return i?.startsWith(this.extendedLengthPathPrefix)&&(i=i.slice(this.extendedLengthPathPrefix.length)),i?.startsWith(this.ntObjectManagerPathPrefix)&&(i=i.slice(this.ntObjectManagerPathPrefix.length)),new ae(n.Name,`${n.ProcessId}`,i)})}};var je=J(require("os")),Sn=J(require("path")),pt=J(require("vscode"));var We=class{constructor(t,r){this.attachItemsProvider=t;this.context=r}async ShowAttachEntries(t){return pn(()=>this.attachItemsProvider.getAttachItems(t),this.context)}},_e=class e{constructor(){this._channel=pt.window.createOutputChannel("remote-attach")}_channel;async ShowAttachEntries(t){this._channel.clear();let r,n=t?t.pipeTransport:void 0,i=t?t.useExtendedRemote:void 0,s=t?t.miDebuggerPath:void 0,o=t?t.miDebuggerServerAddress:void 0;if(n){let h;if(je.platform()==="win32"&&n.pipeProgram&&!await Ne(n.pipeProgram)){let u=n.pipeProgram.toLowerCase().trim(),d=ot[process.arch];if(await Ne(t.pipeTransport.pipeProgram)||(h=Se.checkAndReplaceWSLPipeProgram(u,d)),!h&&t.pipeTransport.pipeCwd){let v=t.pipeTransport.pipeCwd.toLowerCase().trim(),w=Sn.join(v,u);await Ne(w)||(h=Se.checkAndReplaceWSLPipeProgram(w,d))}}h||(h=n.pipeProgram);let a=n.pipeArgs,l=e.createArgumentList(a),f=`"${h}" ${l}`;r=await this.getRemoteOSAndProcesses(f)}else if(!n&&i){if(!s||!o)throw new Error(x("debugger.path.and.server.address.required","{0} in debug configuration requires {1} and {2}","useExtendedRemote","miDebuggerPath","miDebuggerServerAddress"));r=await this.getRemoteProcessesExtendedRemote(s,o)}else throw new Error(x("no.pipetransport.useextendedremote","Chosen debug configuration does not contain {0} or {1}","pipeTransport","useExtendedRemote"));let c={matchOnDetail:!0,matchOnDescription:!0,placeHolder:x("select.process.attach","Select the process to attach to")},m=await pt.window.showQuickPick(r,c);if(m)return m.id;throw new Error(x("process.not.selected","Process not selected."))}getRemoteProcessCommand(){let t="'",r='"',n="$(",i=")",s='\\"',o="";return je.platform()!=="win32"&&(t='"',r="'"),je.platform()==="linux"&&(o="/bin/"),`${r}${o}sh -c ${t}uname && if [ ${n}uname -o${i} = ${s}Toybox${s} ] ; then ${Y.psToyboxCommand} ; elif [ ${n}uname${i} = ${s}Linux${s} ] ; then ${Y.psLinuxCommand} ; elif [ ${n}uname${i} = ${s}Darwin${s} ] ; then ${Y.psDarwinCommand}; fi${t}${r}`}async getRemoteOSAndProcesses(t){let r=`${t} ${this.getRemoteProcessCommand()}`,i=(await yn(r,void 0,this._channel)).split(/\r?\n/);if(i.length===0)throw new Error(x("pipe.failed","Pipe transport failed to get OS and processes."));{let s=i[0].replace(/[\r\n]+/g,"");if(s!=="Linux"&&s!=="Darwin")throw new Error(`Operating system "${s}" not supported.`);if(i.length===1)throw new Error(x("no.process.list","Transport attach could not obtain processes list."));{let o=i.slice(1);return Y.ParseProcessFromPsArray(o).sort((c,m)=>{if(c.name===void 0)return m.name===void 0?0:1;if(m.name===void 0)return-1;let h=c.name.toLowerCase(),a=m.name.toLowerCase();return h===a?0:h<a?-1:1}).map(c=>c.toAttachItem())}}}async getRemoteProcessesExtendedRemote(t,r){let n=[`-ex "target extended-remote ${r}"`,'-ex "info os processes"',"-batch"],i=await ct(t,n);for(let o=0;o<5&&!i.succeeded&&i.outputError.length===0;o++)i=await ct(t,n);if(!i.succeeded)throw new Error(x("failed.to.make.gdb.connection",'Failed to make GDB connection: "{0}".',i.output));if(i.outputError.length!==0)throw new Error(x("failed.to.make.gdb.connection",'Failed to make GDB connection: "{0}".',i.outputError));let s=this.parseProcessesFromInfoOsProcesses(i.output);if(!s||s.length===0)throw new Error(x("failed.to.parse.processes",'Failed to parse processes: "{0}".',i.output));return s}parseProcessesFromInfoOsProcesses(t){let r=t?.split(`
`);if(!r?.length)return[];let n=[];for(let i of r){let s=i.trim();if(!s.endsWith("?")){let o=s.match(/^(\d+)\s+(.+?)\s+(?:\d+,)*\d+$/);if(o?.length===3){let c=o[1],m=o[2];n.push({label:m,id:c,description:c})}}}return n}static createArgumentList(t){let r="";for(let n of t)r&&(r+=" "),r+=`"${n}"`;return r}};function Rs(e){console.log("Congratulations, your extension Cpp Debug is now active!");let t=Re.Get(),r=new We(t,e);e.subscriptions.push(ht.commands.registerCommand("cppdebug.pickNativeProcess",()=>r.ShowAttachEntries()));let n=new _e;e.subscriptions.push(ht.commands.registerCommand("cppdebug.pickRemoteNativeProcess",i=>n.ShowAttachEntries(i))),wn(e)}function js(){}0&&(module.exports={activate,deactivate});
